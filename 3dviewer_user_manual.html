
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>3. 3D Viewer User Manual &#8212; iMOD Suite  documentation</title>
    
    <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/pydata-sphinx-theme.css" />
    <link rel="stylesheet" type="text/css" href="_static/theme-deltares.css" />
    
    <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. Known Issues" href="viewer_known_issues.html" />
    <link rel="prev" title="2. QGIS Plugin User Manual" href="qgis_user_manual.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
  <nav class="navbar navbar-dark navbar-expand-lg bg-deltares fixed-top bd-navbar shadow" id="navbar-main"><div class="container-xl">

    <a class="navbar-brand" href="index.html">
    <p style="color:#fff;font-size:25px;" class="title">iMOD Suite</p>
    </a>

    <a class="navbar-brand" href="index.html">
    <img src="_static/iMOD_letters.svg" class="logo" alt="logo" />
    </a>
  
    <div id="navbar-menu" class="collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav">
        <li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="viewer_index.html">
  iMOD Viewer
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="python_index.html">
  iMOD Python
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="coupler_index.html">
  iMOD Coupler
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="workflow_index.html">
  Example workflows
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="further_links.html">
  Further Links
 </a>
</li>

        
      </ul>
    </div>

    <a class="navbar-brand" href="https://www.deltares.nl/en/">
    <img src="_static/deltares-white.svg" class="logo" alt="logo" />
    </a>

</div>
  </nav>


    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="viewer_install.html">
   1. Install
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="qgis_user_manual.html">
   2. QGIS Plugin User Manual
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   3. 3D Viewer User Manual
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="viewer_known_issues.html">
   4. Known Issues
  </a>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#introduction">
   3.1. Introduction
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#relationship-with-qgis">
   3.2. Relationship with QGIS
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#features">
   3.3. Features
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#general-workings">
   3.4. General Workings
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#imod-3d-viewer-solutions-and-autosave-file">
     3.4.1. iMOD 3D Viewer solutions and autosave file
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-explorer-sidebar">
     3.4.2. The explorer sidebar
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#loading-and-unloading-objects">
     3.4.3. Loading and unloading objects
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-visualize-data-on-a-grid">
     3.4.4. How to visualize data on a grid
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#locking-mechanism">
     3.4.5. Locking mechanism
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#moving-objects-in-the-treeview">
     3.4.6. Moving objects in the treeview
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-delete-an-object">
     3.4.7. How to delete an object
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-the-time-slider">
     3.4.8. Using the time-slider
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#property-windows">
     3.4.9. Property windows
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-to-use-the-viewer">
   3.5. How to use the viewer
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-use-clipping">
     3.5.1. How to use clipping
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-plot-gridlines">
     3.5.2. How to plot gridlines
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-change-the-vertical-exaggeration">
     3.5.3. How to change the vertical exaggeration
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-change-the-representation-of-a-grid">
     3.5.4. How to change the representation of a grid
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#changing-the-legend-of-a-ugrid-dataset-idf-or-fence-diagram-grid">
   3.6. Changing the legend of a UGRID dataset, IDF or fence diagram grid.
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-legend-editor">
     3.6.1. The legend editor
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#legend-sidepane">
     3.6.2. Legend sidepane
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#working-with-fence-diagrams">
     3.6.3. Working with fence diagrams
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#working-with-ipf-files">
   3.7. Working with IPF files
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#plotting-borehole-data">
     3.7.1. Plotting borehole data
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#working-with-idf-files">
   3.8. Working with IDF files
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#idf-file-resolution">
     3.8.1. IDF file resolution
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#additional-representation-options-for-idf-files">
     3.8.2. Additional representation options for IDF files
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#working-with-shapefiles">
   3.9. Working with shapefiles
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#how-to-inspect-dataset-values-of-a-cell">
   3.10. How to inspect dataset values of a cell
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#layered-ugrid">
   3.11. Layered UGRID
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="d-viewer-user-manual">
<h1><span class="section-number">3. </span>3D Viewer User Manual<a class="headerlink" href="#d-viewer-user-manual" title="Permalink to this headline">¶</a></h1>
<section id="introduction">
<h2><span class="section-number">3.1. </span>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The iMOD 3D Viewer is a viewer for grids and datasets. In this manual
we consider a <strong>grid</strong> to be a region of space that is subdivided into
cells. A grid input file contains the geometry of these cells, often as
a list of vertex coordinates and cell-vertex connections.</p>
<p>A <strong>dataset</strong> is a list of values associated to the cells or vertices of
a grid. A dataset can contain for example a porosity or hydraulic head
for every cell in the grid. A dataset can have an associated time. In an
input file, a dataset is usually just a list of values where value
number <em>N</em> is associated to cell number <em>N</em> in the grid.</p>
<p>The iMOD 3D Viewer is used for viewing the grids in 3D, and for
plotting datasets on top of the grids using a color legend. To gain more
insight in the data, the color legend can be edited, and the values of
individual cells can be inspected. Slider tools allow viewing the inside
of 3D bodies.</p>
</section>
<section id="relationship-with-qgis">
<h2><span class="section-number">3.2. </span>Relationship with QGIS<a class="headerlink" href="#relationship-with-qgis" title="Permalink to this headline">¶</a></h2>
<p>The iMOD 3D Viewer can be used as a standalone or in combination with
the iMOD QGIS plugin. From this plugin, the viewer can be
launched, and grids can be loaded into it. Using the QGIS plugin is
currently the only way to create fence diagrams in the viewer. Also, the
QGIS plugin allows for specifying a bounding box for UGRID files. When
this option is used, the viewer only loads the part of the grid in an
UGRID file that is inside the bounding box.</p>
</section>
<section id="features">
<h2><span class="section-number">3.3. </span>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<p>The iMOD 3D Viewer supports visualizing grids in the following file
formats:</p>
<ul class="simple">
<li><p>IDF files. Both equidistant and non-equidistant UGRIDs are supported.</p></li>
<li><p>UGRID files. the iMOD 3D Viewer can read UGRIDs that contain exclusively 2D
elements such as triangles, quadrilaterals and other polygons. 1D and
3D elements are not supported. In some cases, a layered grid can be
encoded as a 2D grid with certain properties. See the Layered UGRID
chapter for more detail.</p></li>
<li><p>Grb.disu files. These files are written by modflow and contain an
unstructured layered grid used in a modflow simulation. Only the grid
can be loaded; datasets cannot be loaded (yet)</p></li>
</ul>
<p>The iMOD 3D Viewer also supports viewing some non-grid objects.</p>
<ul class="simple">
<li><p>IPF files. These files contain tables of numeric and text data,
separated by commas and whitespace, and with a small file header
containing the column names. IPF files can be rendered as a
collection of points (the user chooses which columns to use for x, y,
and z coordinates) or vertical cylinders (the user chooses which
columns to use for x, y, top and bottom). The intended use of this is
to visualize for example borehole locations, observations wells,
production wells or well filters.</p></li>
<li><p>Shapefiles. These can be used to add geographical context, by adding
rivers or province boundaries to the view. Only vector-type
shapefiles can be show, and only the linestrings, polygons and
multipolygons in it are imported.</p></li>
</ul>
<p>The iMOD 3D Viewer can show fence diagrams. This only works when used in
combination with the iMOD QGIS plugin</p>
</section>
<section id="general-workings">
<h2><span class="section-number">3.4. </span>General Workings<a class="headerlink" href="#general-workings" title="Permalink to this headline">¶</a></h2>
<section id="imod-3d-viewer-solutions-and-autosave-file">
<h3><span class="section-number">3.4.1. </span>iMOD 3D Viewer solutions and autosave file<a class="headerlink" href="#imod-3d-viewer-solutions-and-autosave-file" title="Permalink to this headline">¶</a></h3>
<figure class="align-default" id="id1">
<span id="image1"></span><a class="reference internal image-reference" href="_images/image1.png"><img alt="_images/image1.png" src="_images/image1.png" style="width: 0.97412in; height: 1.64062in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.4.1 </span><span class="caption-text">File menu options for saving and loading projects.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>The list of open files, along with the chosen legends and IPF column
mappings, can be saved into an iMOD 3D Viewer solution file. To do this, open the
file menu and choose “save” or “save as”.</p>
<p>The resulting file can be opened with the “open project file” option.</p>
<p>An autosave file is automatically created or updated when opening a
grid, overlay or IPF file, or when editing a legend or an IPF column
mapping. This autosave file therefore reflects the state of the viewer
more or less recently and is stored in the appdata directory, most
likely this:</p>
<p><code class="docutils literal notranslate"><span class="pre">C:\\Users\\yourname\\AppData\\Roaming\\IMOD6</span></code></p>
</section>
<section id="the-explorer-sidebar">
<h3><span class="section-number">3.4.2. </span>The explorer sidebar<a class="headerlink" href="#the-explorer-sidebar" title="Permalink to this headline">¶</a></h3>
<p>When a file is opened- for example a file containing a grid- then
automatically entries are added to the sidebar of the application. These
entries represent the grids and datasets in the file and allow you to
interact with them (<a class="reference internal" href="#image2"><span class="std std-numref">Fig. 3.4.2</span></a>).</p>
<figure class="align-default" id="id2">
<span id="image2"></span><a class="reference internal image-reference" href="_images/image2.png"><img alt="_images/image2.png" src="_images/image2.png" style="width: 7.5in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.4.2 </span><span class="caption-text">The explorer sidebar shows the objects that are available for
viewing as a tree structure</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>In the example in <a class="reference internal" href="#image2"><span class="std std-numref">Fig. 3.4.2</span></a>, the content of the explorer sidebar is
shown. In this example, the sidebar contains a shapefile (a map of the
waterboards that is used for orientation of the user only); and IPF file
containing boreholes, and a layered UGRID file.</p>
<p>All The shapefile and the grid are shown in the viewer, which is why
they are <strong>bold</strong>. The IPF is not shown in the viewer and is not bold.
The shapefile and the IPF file are each only one line in the sidebar.
The layered UGRID is a tree-node that can be expanded or collapsed as
desired. For all three of these, a <strong>context menu</strong> will appear when a
right mouse click is performed on it.</p>
<p>The layered UGRID root node is called “Dommel-test.nc”. this
represents the whole UGRID file. This node can be expanded to show the
following nodes:</p>
<ul class="simple">
<li><p>a grouping node called “All Layers”. This node has no context menu
and is never bold.</p>
<ul>
<li><p>an entry for each layer. They have the same name as the inputfile,
with the suffix “_layer_X” where X is the layer number. Layers are
shown in boldface when the layer is shown in the viewer. A
<strong>context menu</strong> appears on a right mouse click on this node.</p>
<ul>
<li><p>the available datasets per layer. In this case,
“bottom_layer_x”, “thickness_layer_x”, “top_layer_x”,
“Elevation (cell centre)_layer_x”. These datasets are shown in
bold if they are visible in the viewer. Only one dataset per
layer can be shown in the viewer. A dataset is shown in the
viewer when <strong>double-clicked</strong> with the left mouse button.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>A grouping node called “Layered datasets”. This node has no context
menu and is never bold.</p>
<ul>
<li><p>An entry for layered datasets. These entries are used to
synchronise the dataset that is shown for all the layers of the
grid. This means that if we <strong>double-click</strong> the layered dataset
“bottom”, then grid layer 1 (if visible) will show dataset
“bottom_layer_1”; grid layer N will show “bottom_layer _N”
etcetera. A <strong>context menu</strong> appears when doing a right mouse
click on this node, allowing you to set a legend for all layers at
once.</p></li>
</ul>
</li>
</ul>
</section>
<section id="loading-and-unloading-objects">
<h3><span class="section-number">3.4.3. </span>Loading and unloading objects<a class="headerlink" href="#loading-and-unloading-objects" title="Permalink to this headline">¶</a></h3>
<p>Objects can be added to the explorer</p>
<ol class="arabic simple">
<li><p>Through the QGIS plugin ( see the manual of that)</p></li>
<li><p>By opening the “data”menu and selecting “open grid” (for UGRID,
IPF,or grb.disu files); “open overlay” ( for shapefiles) ; or “open
point data” (for IPF files)</p></li>
</ol>
<p>When the second method is used, then the objects appear in the sidebar
but not in the viewer. They have to be loaded into the viewer in a
second step. To do that, select the objects you want to see in the
sidebar and click the “draw selected layers” button. (<a class="reference internal" href="_images/image3.png"><img alt="image1" src="_images/image3.png" style="width: 0.15625in; height: 0.14097in;" /></a>) (<a class="reference internal" href="#image4"><span class="std std-numref">Fig. 3.4.3</span></a>).</p>
<figure class="align-default" id="id3">
<span id="image4"></span><a class="reference internal image-reference" href="_images/image4.png"><img alt="_images/image4.png" src="_images/image4.png" style="width: 7.5in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.4.3 </span><span class="caption-text">In order to visualize a grid in the viewer, select the grid
and then press the green button.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>When an object is visualized in the viewer, its name appears in boldface
in the explorer.</p>
<p>When the “draw selected layers” button (<a class="reference internal" href="_images/image3.png"><img alt="image2" src="_images/image3.png" style="width: 0.15625in; height: 0.14097in;" /></a>) is pressed, all object
that are <em>not</em> selected are unloaded from the viewer and are no longer
bold, except if they are <em>locked.</em></p>
</section>
<section id="how-to-visualize-data-on-a-grid">
<h3><span class="section-number">3.4.4. </span>How to visualize data on a grid<a class="headerlink" href="#how-to-visualize-data-on-a-grid" title="Permalink to this headline">¶</a></h3>
<p>In order to visualize a dataset on a grid, first visualize the grid
itself. Then double-click on one of the datasets in the explorer.</p>
<p>Once visualized, the dataset will appear in boldface in the explorer
(<a class="reference internal" href="#image5"><span class="std std-numref">Fig. 3.4.4</span></a>).</p>
<figure class="align-default" id="id4">
<span id="image5"></span><a class="reference internal image-reference" href="_images/image5.png"><img alt="_images/image5.png" src="_images/image5.png" style="width: 7.5in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.4.4 </span><span class="caption-text">The dataset ‘water level’ is visualized on the grid and is marked in bold in the
explorer.</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Currently, only datasets that hold scalar values associated to cells can
be shown.</p>
</section>
<section id="locking-mechanism">
<h3><span class="section-number">3.4.5. </span>Locking mechanism<a class="headerlink" href="#locking-mechanism" title="Permalink to this headline">¶</a></h3>
<p>Top level nodes can be “locked” and grid layer nodes can be</p>
<p>When a node is “locked”, the object it represents is no longer
automatically unloaded when the “draw selected layers” (<a class="reference internal" href="_images/image3.png"><img alt="image3" src="_images/image3.png" style="width: 0.15625in; height: 0.14097in;" /></a>) is
pressed. It can still be moved or deleted through the context menu.</p>
<p>To lock a node, select it and press <em>L</em> (lowercase or uppercase) on the
keyboard. A padlock icon now appears next to it (<a class="reference internal" href="#image6"><span class="std std-numref">Fig. 3.4.5</span></a>).</p>
<p>To unlock it, press <em>O</em> (lowercase or uppercase) on the keyboard. Now an
open padlock icon appears.</p>
<figure class="align-default" id="id5">
<span id="image6"></span><a class="reference internal image-reference" href="_images/image6.png"><img alt="_images/image6.png" src="_images/image6.png" style="width: 4.83333in; height: 2.13542in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.4.5 </span><span class="caption-text">The padlock icon shows if a node is locked or unlocked</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="moving-objects-in-the-treeview">
<h3><span class="section-number">3.4.6. </span>Moving objects in the treeview<a class="headerlink" href="#moving-objects-in-the-treeview" title="Permalink to this headline">¶</a></h3>
<p>Top level nodes can be moved up and down the treeview, allowing you to
order the objects as you see fit.</p>
<p>To move an item in the treeview, select it with the mouse and then press
<em>u</em> (up) or <em>d</em> (down) to move the object.</p>
</section>
<section id="how-to-delete-an-object">
<h3><span class="section-number">3.4.7. </span>How to delete an object<a class="headerlink" href="#how-to-delete-an-object" title="Permalink to this headline">¶</a></h3>
<p>To delete an object (grid, overlay or IPF cylinders) , right click on it
in the explorer. Now a context menu appears. Choose the option “delete”
to have the grid removed from the explorer. If you want to stop
visualization of the grid without removing it from the explorer, use the
redraw button instead. In the explorer, select the grids you want to be
visualized, and make sure the grids you want to be unloaded are
unselected. Then press redraw.</p>
</section>
<section id="using-the-time-slider">
<h3><span class="section-number">3.4.8. </span>Using the time-slider<a class="headerlink" href="#using-the-time-slider" title="Permalink to this headline">¶</a></h3>
<p>Some datasets vary through time. The iMOD 3D Viewer currently supports 2 cases:</p>
<ol class="arabic simple">
<li><p>the dataset does not have a time associated. In this case it is
called “invariant” in the UI</p></li>
<li><p>the dataset has one or more sets of values, each one with a specific
point in time associated ( so not an interval!). This time must be an
actual date-time; we don’t support dimensionless time or unreferenced
time.</p></li>
</ol>
<figure class="align-default" id="id6">
<span id="image8"></span><a class="reference internal image-reference" href="_images/image8.png"><img alt="_images/image8.png" src="_images/image8.png" style="width: 7.5in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.4.6 </span><span class="caption-text">Tools and texts related to time in the UI</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><a class="reference internal" href="#image8"><span class="std std-numref">Fig. 3.4.6</span></a> shows the location of tools and texts in the UI that help the
user orientate in and step through the time dimension of datasets. First
note the time displayed in the top toolbar (1). This is the “viewer time”, the
time the viewer is currently trying to display. Since the time
discretization can be different per dataset and we can show different
datasets and grids simultaneously, it is not guaranteed that all
datasets currently in the viewer can be shown for this specific time!
Hence, in the sidebar it is shown at what time the datasets are actually
diplayed (2).</p>
<p>The viewer time can be selected using the slider. It varies over the
temporal range of all displayed datasets combined- this means that when
you display another dataset, the range of the slider could change. The
scaling of the slider is based on the time indexes, not on the time
value itself. This means that if you have dataset values for 3 times,
the slider will be divided in 2 equally sized intervals- and you would
be able to select the beginning, halfway and the end of the slider,
regardless of how much actual time there is between these 3 times.</p>
<p>When there are many times available, the resolution of the slider
becomes very fine and it can then be more convenient to use the “next
time”and “previous time” buttons, which increment and decrement the
slider one position. There is also a “rewind” button to move the slider
to its lowest value.</p>
<p>Finally, it is possible to animate plots using a “play” button. This
moves the slider one step forward per second, or slower if updating the
plot takes longer. The animation can be stopped using the “stop” button.</p>
<p>The decision on what time to display for each dataset is taken as
follows (see <a class="reference internal" href="#imagetimerules"><span class="std std-numref">Fig. 3.4.7</span></a>):</p>
<ul class="simple">
<li><p>invariant datasets are shown regardless of the viewer time’</p></li>
<li><p>if a dataset has a value at the viewer time this value is shown</p></li>
<li><p>if it has no value at the viewer time but it has a value earlier than
the viewer time then this value is shown</p></li>
<li><p>if it has no value at the viewer time and no value earlier than the
viewer time then the first time after the viewer time is shown.</p></li>
</ul>
<figure class="align-default" id="id7">
<span id="imagetimerules"></span><a class="reference internal image-reference" href="_images/imageTimerules.png"><img alt="_images/imageTimerules.png" src="_images/imageTimerules.png" style="width: 7.5in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.4.7 </span><span class="caption-text">Times displayed for different dataset for a given viewer time
(the vertical line). The blue dots indicate the times at which a dataset
has values. The red dots indicate the values displayed.</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="property-windows">
<h3><span class="section-number">3.4.9. </span>Property windows<a class="headerlink" href="#property-windows" title="Permalink to this headline">¶</a></h3>
<p>By right-clicking on grids or datasets in the explorer, a context menu
appears. In it, there is usually a “properties” option which opens a
form displaying some of the properties of the object- and sometimes it
allows setting some properties as well. Here are a few examples:</p>
<figure class="align-default" id="id8">
<span id="image9"></span><a class="reference internal image-reference" href="_images/image9.png"><img alt="_images/image9.png" src="_images/image9.png" style="width: 6.26806in; height: 2.52431in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.4.8 </span><span class="caption-text">Property windows, from left to right for a grid, a layered
grid and a dataset</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="how-to-use-the-viewer">
<h2><span class="section-number">3.5. </span>How to use the viewer<a class="headerlink" href="#how-to-use-the-viewer" title="Permalink to this headline">¶</a></h2>
<p>The following controls work if the mouse pointer is in the viewer area:</p>
<p><strong>Spinning the mouse wheel forward:</strong> zooms in</p>
<p><strong>Spinning the mouse wheel backward</strong>: zooms out</p>
<p><strong>Hold shift key, while pressing the right mouse key, and move the
mouse:</strong> moves the camera horizontally, corresponding to the mouse
movement</p>
<p><strong>Hold ctrl key, while pressing the right mouse key, and move the
mouse:</strong> this rotates the camera around its lens.</p>
<p><strong>Clicking on a grid:</strong> this selects or unselects the grid. When a grid
is selected, its name appears in red in the explorer. Only one grid can
be selected at any time. A grid must be selected in order to change its
legend, or to inspect its cells values. This way of selecting a grid can be slow for larger grids.
Grids can also be selected by using the context menu of the grid in the sidebar. It has an option <em>Select in viewer</em>.</p>
<p><strong>Pressing the “zoom to extent” button (</strong> <a class="reference internal" href="_images/image10.png"><img alt="image5" src="_images/image10.png" style="width: 0.16535in; height: 0.16535in;" /></a> <strong>) in the
toolbar:</strong> zooms out until all the grids that are visualized in the
current viewer fit on the screen.</p>
<p>In the 3D viewer the following also works:</p>
<p><strong>Hold the right mouse button while moving the mouse</strong>: this moves the
camera in a trajectory around the grid. The direction and length of the
mouse movement determine the amount of camera movement.</p>
<figure class="align-default" id="id9">
<span id="imageviewercontrols"></span><a class="reference internal image-reference" href="_images/imageViewerControls.png"><img alt="_images/imageViewerControls.png" src="_images/imageViewerControls.png" style="width: 6.26806in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.5.1 </span><span class="caption-text">Some of the viewer controls are also implemented by buttons.</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p><strong>Using the toolbar buttons to control the viewer</strong>
As shown in <a class="reference internal" href="#imageviewercontrols"><span class="std std-numref">Fig. 3.5.1</span></a>, there are also buttons in the toolbar to control the viewer. From left to
right in this figure, the buttons do the following</p>
<ul class="simple">
<li><p>zoom to extent. use this button to get a top view of the grid, zoomed out so that all of it is visible</p></li>
<li><p>right(+x). use this button to position the camera so that we look in the +x direction, zoomed out so that the whole
y and z range of the grid is visible.</p></li>
<li><p>left(-x). use this button to position the camera so that we look in the -x direction, zoomed out so that the whole
y and z range of the grid is visible.</p></li>
<li><p>front(-y). use this button to position the camera so that we look in the -y direction, zoomed out so that the whole
x and z range of the grid is visible.</p></li>
<li><p>back(+y). use this button to position the camera so that we look in the +y direction, zoomed out so that the whole
x and z range of the grid is visible.</p></li>
<li><p>pan. Once this button is pressed, the camera can be dragged. Position the mouse anywhere in the viewer and keep the
left mouse button pressed while dragging.</p></li>
<li><p>zoom out.</p></li>
<li><p>zoom in.</p></li>
</ul>
<section id="how-to-use-clipping">
<h3><span class="section-number">3.5.1. </span>How to use clipping<a class="headerlink" href="#how-to-use-clipping" title="Permalink to this headline">¶</a></h3>
<p>The clipping functionality allows one to “cut off” slices of one or more
grids in the 3D viewer. The internals of the grids are then exposed,
allowing us to see the value of datasets or the grid geometry inside.</p>
<div class="line-block">
<div class="line">To use clipping, open the 3D viewer and visualize one or more grids on
it.</div>
<div class="line">Then press the clipping button in the toolbar (<a class="reference internal" href="#image12"><span class="std std-numref">Fig. 3.5.2</span></a>)</div>
</div>
<figure class="align-default" id="id10">
<span id="image12"></span><a class="reference internal image-reference" href="_images/image12.png"><img alt="_images/image12.png" src="_images/image12.png" style="width: 4.5in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.5.2 </span><span class="caption-text">Activate clipping mode by pressing the clipping button in the
toolbar. Sliders appear in the 3D viewer.</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Now use the sliders to clip the model. Each slider represents the
combined range of all the grids in the viewer in one direction.</p>
<figure class="align-default" id="id11">
<span id="image13"></span><a class="reference internal image-reference" href="_images/image13.png"><img alt="_images/image13.png" src="_images/image13.png" style="width: 3.92897in; height: 2.83333in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.5.3 </span><span class="caption-text">Use sliders to cut model in each direction</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="how-to-plot-gridlines">
<h3><span class="section-number">3.5.2. </span>How to plot gridlines<a class="headerlink" href="#how-to-plot-gridlines" title="Permalink to this headline">¶</a></h3>
<p>It is possible to plot geographical gridlines on top
of a grid (<a class="reference internal" href="#image14"><span class="std std-numref">Fig. 3.5.4</span></a>). <strong>This feature only works well
at near-vertical viewing angles.</strong></p>
<figure class="align-default" id="id12">
<span id="image14"></span><a class="reference internal image-reference" href="_images/image14.png"><img alt="_images/image14.png" src="_images/image14.png" style="width: 6.26528in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.5.4 </span><span class="caption-text">Toggle gridlines with the gridlines button</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="how-to-change-the-vertical-exaggeration">
<h3><span class="section-number">3.5.3. </span>How to change the vertical exaggeration<a class="headerlink" href="#how-to-change-the-vertical-exaggeration" title="Permalink to this headline">¶</a></h3>
<p>In the 3D viewer, objects can appear to be flat when they are not,
because the range in the x and y directions for geological structures is
often much larger than the range in the z direction. For example,
geological layers may extend for tens or hundreds of kilometers
horizontally but have a thickness and height variation of tens of
meters.</p>
<p>To fix this issue, vertical exaggeration can be applied. The same vertical
exaggeration is applied to all the visible
grids.</p>
<p>By default, a vertical exaggeration is computed from the grid geometry.
It computes a vertical exaggeration such that the vertical variation
becomes at least 10% of the horizontal variation.</p>
<p>The exaggeration factor can also be set manually. To do so, disable the
<em>Use automatic exaggeration of z-axis</em> slider and enter the desired value
in the text field above it (<a class="reference internal" href="#image15"><span class="std std-numref">Fig. 3.5.5</span></a>).</p>
<figure class="align-default" id="id13">
<span id="image15"></span><a class="reference internal image-reference" href="_images/image15.png"><img alt="_images/image15.png" src="_images/image15.png" style="width: 6.25764in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.5.5 </span><span class="caption-text">Vertical exaggeration slider and text field</span><a class="headerlink" href="#id13" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="how-to-change-the-representation-of-a-grid">
<h3><span class="section-number">3.5.4. </span>How to change the representation of a grid<a class="headerlink" href="#how-to-change-the-representation-of-a-grid" title="Permalink to this headline">¶</a></h3>
<p>In the 3D viewer, grids can be visualized as solid bodies (<a class="reference internal" href="#image16"><span class="std std-numref">Fig. 3.5.6</span></a>);
as wireframes and as point clouds. In wireframe mode, only the edges of the
cells are drawn, allowing one to look inside the grid. In point cloud
mode, only points corresponding to the cell centers are shown</p>
<p>To change the representation, use the dropdown in the viewer toolbar. Once
selected, a dropdown appears where the representation can be changed.
All visible grids get the selected representation.</p>
<figure class="align-default" id="id14">
<span id="image16"></span><a class="reference internal image-reference" href="_images/image16.png"><img alt="_images/image16.png" src="_images/image16.png" style="width: 6.26528in; height: 2.52292in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.5.6 </span><span class="caption-text">The 3 representations of a grid.
Left the <em>Surface</em> representation, in the centre <em>Wireframe</em>,
and right the <em>Point</em> representation.</span><a class="headerlink" href="#id14" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>The representation can also be changed from the property window of a grid. Here
some other tweaks can also be made, like highlighting cell edges or changing the opacity of the plot.</p>
</section>
</section>
<section id="changing-the-legend-of-a-ugrid-dataset-idf-or-fence-diagram-grid">
<h2><span class="section-number">3.6. </span>Changing the legend of a UGRID dataset, IDF or fence diagram grid.<a class="headerlink" href="#changing-the-legend-of-a-ugrid-dataset-idf-or-fence-diagram-grid" title="Permalink to this headline">¶</a></h2>
<p>To edit the legend of a dataset in an UGRID file, IDF file or fence
diagram, it is necessary to load the legend editor form. From there, the
legend can be customized.</p>
<p>The way to make the legend editor appear, depends on the object.</p>
<p>For an IDF file, or a single layer of a layered UGRID file, or a
non-layered UGRID file, do the following:</p>
<ul class="simple">
<li><p>If not done yet, double click on the dataset to make
it appear in the viewer</p></li>
<li><p>Open the context menu of the IDF file or grid layer</p></li>
<li><p>Press <em>Select in viewer</em></p></li>
<li><p>Press the edit legend button (<a class="reference internal" href="_images/image17.png"><img alt="image6" src="_images/image17.png" style="width: 0.19722in; height: 0.16667in;" /></a>) .</p></li>
</ul>
<p>For a layered ugid dataset (so applying on all layers at the same time)</p>
<ul class="simple">
<li><p>Right click on the data set you want to apply the legend to</p></li>
<li><p>From the context menu, select <em>Edit legend</em></p></li>
</ul>
<section id="the-legend-editor">
<h3><span class="section-number">3.6.1. </span>The legend editor<a class="headerlink" href="#the-legend-editor" title="Permalink to this headline">¶</a></h3>
<p>The legend editor consists of 2 tabs: one for continuous legends and one
for discrete ones (<a class="reference internal" href="#image18"><span class="std std-numref">Fig. 3.6.1</span></a>).</p>
<p>This form is more or less self explanatory. You can choose a color scale
(currently rainbow or blue-white-red). Note that it is possible to save
a legend in a separate file, or to load a legend from such a file, with
the <em>Save</em> and <em>Load</em> buttons.</p>
<figure class="align-default" id="id15">
<span id="image18"></span><a class="reference internal image-reference" href="_images/image18.png"><img alt="_images/image18.png" src="_images/image18.png" style="width: 6.26042in; height: 4.85903in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.6.1 </span><span class="caption-text">The 2 tabs of the legend editor</span><a class="headerlink" href="#id15" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>When using a percentile legend, colors are assigned to a cell based on
the percentage of cells that hold a value lower than that of the current
cell. The color map is distorted to reflect this. For example, when
using the “heat map” legend, the lowest value is blue, the highest red,
and the middle of the range is white. When using a heat map with
percentiles, the white color represents not the middle of the range, but
the value for which 50% of other values is smaller than itself
(<a class="reference internal" href="#image19"><span class="std std-numref">Fig. 3.6.2</span></a>).</p>
<p>For unstructured grids, note that the percentile calculation
does not take cell area into account. For example, for a dataset
with lot of small cells and a few large cells, the percentile legend
will be skewed towards the values of the small cells.</p>
<figure class="align-default" id="id16">
<span id="image19"></span><a class="reference internal image-reference" href="_images/image19.jpeg"><img alt="_images/image19.jpeg" src="_images/image19.jpeg" style="width: 6.25556in; height: 2.50556in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.6.2 </span><span class="caption-text">Heat map legend with percentiles on and off. Without
percentiles (left), the white color is the middle of the legend range.
With percentiles on (right),the color map is distorted and white is now
the median value (50%) of the dataset. In general, a color that represents <em>N</em> %
of the range in the linear legend, is mapped to the value that is larger
than <em>N</em> % of the data in the percentiles legend.</span><a class="headerlink" href="#id16" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="legend-sidepane">
<h3><span class="section-number">3.6.2. </span>Legend sidepane<a class="headerlink" href="#legend-sidepane" title="Permalink to this headline">¶</a></h3>
<p>For quick reference, the legend is shown on a retractable sidepane.
To open or close it, use the button highlighted in the figure below.</p>
<figure class="align-default">
<a class="reference internal image-reference" href="_images/imageSidepane.png"><img alt="_images/imageSidepane.png" src="_images/imageSidepane.png" style="width: 6.25556in;" /></a>
</figure>
</section>
<section id="working-with-fence-diagrams">
<h3><span class="section-number">3.6.3. </span>Working with fence diagrams<a class="headerlink" href="#working-with-fence-diagrams" title="Permalink to this headline">¶</a></h3>
<p>Fence diagrams have the same user interface as layered UGRID files. They
have the same layers as the original layered UGRID they cut through, and
the same datasets. Their legend can be set per-layer or for the whole
fence diagram in the same way as we do for layered UGRIDs.</p>
</section>
</section>
<section id="working-with-ipf-files">
<h2><span class="section-number">3.7. </span>Working with IPF files<a class="headerlink" href="#working-with-ipf-files" title="Permalink to this headline">¶</a></h2>
<p>To visualize an IPF file, open the data menu and click on <em>open overlay
file</em>. An open file dialog appears. Select an IPF file. As with grids,
the filename is then displayed in the explorer bar, but the IPF file is
not yet rendered. To render it, select the IPF’s row in the explorer bar
and hit the <a class="reference internal" href="_images/image3.png"><img alt="image7" src="_images/image3.png" style="width: 0.15625in; height: 0.14097in;" /></a> button.</p>
<p>On import, the iMOD 3D Viewer will attempt to draw a vertical cylinder for each row
in the IPF file’s data block (so excluding the header).</p>
<p>By default, a column called “x”or “X” and “y” or “Y” are used for the
center of the cylinder’s top and bottom; and “top”or “TOP” and “bot” or
“BOT” are used for the z-coordinates of the cylinders top and bottom,
respectively.</p>
<p>If these columns are not present or if they contain text data, then the
first 3 numerical columns are used for x, y and z, and the IPF data is
plotted as points on these locations (<a class="reference internal" href="#image20"><span class="std std-numref">Fig. 3.7.1</span></a>).</p>
<figure class="align-default" id="id17">
<span id="image20"></span><a class="reference internal image-reference" href="_images/image20.png"><img alt="_images/image20.png" src="_images/image20.png" style="width: 3.34375in; height: 2.04167in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.7.1 </span><span class="caption-text">When the default column names are not found an error message
appears.</span><a class="headerlink" href="#id17" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>To adjust the column mapping, right click on the IPF’s row in the
explorer bar and select the “Properties” menu option. Then a window
appears where the column mapping can be updated (<a class="reference internal" href="#image21"><span class="std std-numref">Fig. 3.7.2</span></a>).</p>
<figure class="align-default" id="id18">
<span id="image21"></span><a class="reference internal image-reference" href="_images/image21.png"><img alt="_images/image21.png" src="_images/image21.png" style="width: 3.54673in; height: 4.43662in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.7.2 </span><span class="caption-text">Property window allows to choose what IPF columns to use for
drawing cylinders.</span><a class="headerlink" href="#id18" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>The z0 and z1 comboboxes will be used for the cylinder’s top and bottoms
respectively. If the z1 column is not set, then points will be generated
instead of cylinders.</p>
<p>The <em>Label column</em> combobox allows choosing a combobox to be used for
labels. If not set, then no labels are shown. Otherwise the content of
the selected column will be shown as a text label near the top of the
column.</p>
<p>The IPF column mapping is serialized into solution and autosave files,
and the next time a solution is loaded, the last-used column mapping
will be assigned to each IPF file.</p>
<p>As with overlays, the color and cylinder thickness can be adjusted from
the context menu of the IPF file.</p>
<figure class="align-default" id="id19">
<span id="image22"></span><a class="reference internal image-reference" href="_images/image22.png"><img alt="_images/image22.png" src="_images/image22.png" style="width: 6.26806in; height: 3.66597in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.7.3 </span><span class="caption-text">Image of an IPF plot with labels, viewed from the top.</span><a class="headerlink" href="#id19" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<section id="plotting-borehole-data">
<h3><span class="section-number">3.7.1. </span>Plotting borehole data<a class="headerlink" href="#plotting-borehole-data" title="Permalink to this headline">¶</a></h3>
<p>When the IPF file contains references to additional datafiles, one for
each row in the IPF file, and when these datafiles contain 1D borehole
data, then this data can be plotted on the cylinders.</p>
<p>To do that, check the option “Plot data on cylinder” on the IPF property
form (<a class="reference internal" href="#image23"><span class="std std-numref">Fig. 3.7.4</span></a>) . Both real number data and string data can be plotted.
When the checkbox is checked, a legend the appears on the form proposing
a color mapping. This legend is either a continuous scale (for real
numbers) or a string-to-color mapping like in the example in <a class="reference internal" href="#image23"><span class="std std-numref">Fig. 3.7.4</span></a>.
The colors can be changed by clicking on a particular color box.</p>
<p>These legends can be saved and loaded as well.</p>
<figure class="align-default" id="id20">
<span id="image23"></span><a class="reference internal image-reference" href="_images/image23.png"><img alt="_images/image23.png" src="_images/image23.png" style="width: 6.26806in; height: 4.41458in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.7.4 </span><span class="caption-text">1D borehole data can be plotted on cylinders generated from
the IPF file. Both real number data and string data can be plotted. In
this example, string data was present in the “Admixture” column</span><a class="headerlink" href="#id20" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="working-with-idf-files">
<h2><span class="section-number">3.8. </span>Working with IDF files<a class="headerlink" href="#working-with-idf-files" title="Permalink to this headline">¶</a></h2>
<section id="idf-file-resolution">
<h3><span class="section-number">3.8.1. </span>IDF file resolution<a class="headerlink" href="#idf-file-resolution" title="Permalink to this headline">¶</a></h3>
<p>An IDF files contains a 2D structured grid, and 1 dataset with cell
data. This dataset is treated for visualization purposes as if it were
elevation, but it can be anything. The resolution is sometimes so high
it makes the grid slow to load. Therefore, an automatic upscaling is
applied when visualizing the grid, reducing the number of cells to
approximately 100*100. Each upscaled cell contains an integer number of
actual cells in both the x and y directions; therefore cell boundaries
in the upscaled grid are guaranteed to coincide with cell boundaries in
the actual grid.</p>
<p>The “elevation“ value of each upscaled cell is taken from the actual
cell that contains the upscaled cell’s center.</p>
<p>To increase the resolution of the IDF grid in the viewer, zoom in with
the mouse wheel to the area where additional detail is required. Then
press the redraw button( <a class="reference internal" href="_images/image24.png"><img alt="image8" src="_images/image24.png" style="width: 0.15139in; height: 0.14375in;" /></a>).</p>
<p>This renders the area visible in the viewer in higher resolution, but
removes the invisible parts of the grid (<a class="reference internal" href="#image25"><span class="std std-numref">Fig. 3.8.1</span></a>). To restore those,
zoom out again and press <a class="reference internal" href="_images/image24.png"><img alt="image9" src="_images/image24.png" style="width: 0.15139in; height: 0.14375in;" /></a> again.</p>
<figure class="align-default" id="id21">
<span id="image25"></span><a class="reference internal image-reference" href="_images/image25.png"><img alt="_images/image25.png" src="_images/image25.png" style="width: 6.25in; height: 2.16667in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.8.1 </span><span class="caption-text">Left, an upscaled IDF file. Middle: after zooming in on an
area of interest. Right: after pressing the redraw button to increase
resolution.</span><a class="headerlink" href="#id21" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Another way to change the resolution of an IDF file is to select the
IDF’s row in the explorer bar and clicking on “resolution” (<a class="reference internal" href="#image26"><span class="std std-numref">Fig. 3.8.2</span></a>).
This allows choosing a resolution of 100x100, 250x250 or 500x500 for the
IPF file (<a class="reference internal" href="#image27"><span class="std std-numref">Fig. 3.8.3</span></a>).</p>
<figure class="align-default" id="id22">
<span id="image26"></span><a class="reference internal image-reference" href="_images/image26.png"><img alt="_images/image26.png" src="_images/image26.png" style="width: 2.11458in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.8.2 </span><span class="caption-text">Choose the resolution of the IDF file</span><a class="headerlink" href="#id22" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id23">
<span id="image27"></span><a class="reference internal image-reference" href="_images/image27.jpeg"><img alt="_images/image27.jpeg" src="_images/image27.jpeg" style="width: 6.25556in; height: 2.47431in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.8.3 </span><span class="caption-text">IDF file at resolution 100x100 (left); 250*250(middle) and
500x500 (right)</span><a class="headerlink" href="#id23" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="additional-representation-options-for-idf-files">
<h3><span class="section-number">3.8.2. </span>Additional representation options for IDF files<a class="headerlink" href="#additional-representation-options-for-idf-files" title="Permalink to this headline">¶</a></h3>
<p>The options outlined above change the way each cell is rendered, but
they do not change the underlying geometry of the cells. For IDF files
we have an additional option. IDF cells are horizontal rectangles, and a
surface formed by an IDF grid may look strange in the 3D viewer because
these rectangles “float” at different elevations (<a class="reference internal" href="#image29"><span class="std std-numref">Fig. 3.8.5</span></a>). Therefore,
an additional option of rendering an IDF grid as triangles was added.
The corner points of the triangle are the cell-centers of the
rectangles, and have the elevation of that rectangle.</p>
<p>To change the representation of an IDF file, load the IPF file and then
right-click on its entry in the explorer bar. A context menu appears
(<a class="reference internal" href="#image28"><span class="std std-numref">Fig. 3.8.4</span></a>). Choose rectangles or triangles as desired.</p>
<figure class="align-default" id="id24">
<span id="image28"></span><a class="reference internal image-reference" href="_images/image28.png"><img alt="_images/image28.png" src="_images/image28.png" style="width: 2.1in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.8.4 </span><span class="caption-text">Context menu for changing representation of an IDF file</span><a class="headerlink" href="#id24" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id25">
<span id="image29"></span><a class="reference internal image-reference" href="_images/image29.png"><img alt="_images/image29.png" src="_images/image29.png" style="width: 5.4375in; height: 2.21832in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.8.5 </span><span class="caption-text">An IDF file rendered as rectangles (left) and triangles
(right)</span><a class="headerlink" href="#id25" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="working-with-shapefiles">
<h2><span class="section-number">3.9. </span>Working with shapefiles<a class="headerlink" href="#working-with-shapefiles" title="Permalink to this headline">¶</a></h2>
<p>To visualize an overlay, open the data menu and click on “open overlay
file”. An open file dialog appears. Select a shapefile containing vector
data. As with grids, the filename is then displayed in the explorer bar,
but the overlay is not yet rendered. To render it, select the overlay’s
row in the explorer bar and hit the <a class="reference internal" href="_images/image3.png"><img alt="image10" src="_images/image3.png" style="width: 0.15625in; height: 0.14097in;" /></a> button.</p>
<p>Once loaded, the line thickness and color of the overlay can be changed
by right clicking on the overlay’s row in the explorer bar. This makes a
context menu appear (<a class="reference internal" href="#image30"><span class="std std-numref">Fig. 3.9.1</span></a>). There is a menu option for changing the
color and one for changing the line thickness.</p>
<figure class="align-default" id="id26">
<span id="image30"></span><a class="reference internal image-reference" href="_images/image30.png"><img alt="_images/image30.png" src="_images/image30.png" style="width: 6.25556in; height: 2.90625in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.9.1 </span><span class="caption-text">Context menu options for changing the color and line
thickness of an overlay.</span><a class="headerlink" href="#id26" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="how-to-inspect-dataset-values-of-a-cell">
<h2><span class="section-number">3.10. </span>How to inspect dataset values of a cell<a class="headerlink" href="#how-to-inspect-dataset-values-of-a-cell" title="Permalink to this headline">¶</a></h2>
<p>When we visualize a dataset, its values are used to assign a color to
each cell; the value to cell mapping is defined by the legend. Hence,
inspecting the plot of a dataset gives a rough idea of the value of that
dataset in each cell.</p>
<p>To get a more precise value, it is possible to click on a cell and get a
list of the values of different datasets in that cell. Take the
following steps to do this (<a class="reference internal" href="#image31"><span class="std std-numref">Fig. 3.10.1</span></a>):</p>
<ol class="arabic simple">
<li><p>Visualize a grid in the viewer and select it.</p></li>
<li><p>Press the “identify” button in the toolbar.</p></li>
<li><p>Select some datasets of the selected grid in the explorer</p></li>
<li><p>Click on a cell of the grid. It will be highlighted in black.</p></li>
<li><p>Now a window opens showing the values of the selected datasets in the
selected cell.</p></li>
</ol>
<p>To end identifying, press the “identify” button again.</p>
<figure class="align-default" id="id27">
<span id="image31"></span><a class="reference internal image-reference" href="_images/image31.png"><img alt="_images/image31.png" src="_images/image31.png" style="width: 6.26528in; height: 3.71181in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.10.1 </span><span class="caption-text">Dataset values can be inspected with the identify button</span><a class="headerlink" href="#id27" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="layered-ugrid">
<h2><span class="section-number">3.11. </span>Layered UGRID<a class="headerlink" href="#layered-ugrid" title="Permalink to this headline">¶</a></h2>
<p>The iMOD 3D Viewer currently supports only 2D UGRID files. However, when it
recognizes that datasets called <em>layer_1_top</em> and <em>layer_1_bottom</em> are
present (<em>1</em> being a layer number), it will create a 3D grid using the x
and y coordinates from the 2D grid, and the top and bottoms from the
datasets. The result is a grid with cells that have horizontal and
vertical cell faces, and that can represent for example a geological
layer. Additional datasets (<em>layer_2_top</em> and <em>layer_2_bottom</em>) can be
provided to create additional layers. The grids created this way will
all have the same x and y positions for their nodes, but due to the top
and bot datasets, they are at different depths. There can be holes
between the layers to represent for example aquicludes.</p>
<p>Each layer is shown in the explorer as a separate grid that can be
loaded and unloaded independently. Properties can be assigned to each
layer by listing the layer number in the dataset name. For example, we
can assign a kD property to each layer by creating datasets called
<em>kD_layer_1</em>, <em>kD_layer_2</em>, etcetera.</p>
<p>An example to convert a layered subsurface model in *.idf to a UGRID
file can be found on
<a class="reference external" href="https://gitlab.com/deltares/imod/imod-python/-/snippets/2104179">https://gitlab.com/deltares/imod/imod-python/-/snippets/2104179</a></p>
<figure class="align-default" id="id28">
<span id="image32"></span><a class="reference internal image-reference" href="_images/image32.png"><img alt="_images/image32.png" src="_images/image32.png" style="width: 6.26806in; height: 3.36806in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.11.1 </span><span class="caption-text">A 2D UGRID file rendered as a layered 3D grid</span><a class="headerlink" href="#id28" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id29">
<span id="image33"></span><a class="reference internal image-reference" href="_images/image33.png"><img alt="_images/image33.png" src="_images/image33.png" style="width: 6.26806in; height: 3.27639in;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 3.11.2 </span><span class="caption-text">View on internals of UGRID that can be used for rendering as
a 3D layered grid</span><a class="headerlink" href="#id29" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="qgis_user_manual.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">2. </span>QGIS Plugin User Manual</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="viewer_known_issues.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">4. </span>Known Issues</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright Deltares.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>